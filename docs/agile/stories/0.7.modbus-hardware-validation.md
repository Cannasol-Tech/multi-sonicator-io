# Story 0.7: MODBUS Hardware Validation

**Story ID**: S-0.7
**Epic**: Epic 0: HIL Testing Framework & Hardware Verification
**Priority**: High
**Owner**: Product Owner
**Created**: 2025-09-10
**Updated**: 2025-09-10

## Status

NotStarted

## User Story

As a firmware/QA engineer,
I want to validate the MODBUS communication layer on physical hardware,
so that hardware-in-the-loop tests can reliably exercise all registers and control paths.

## Scope

- Validate RTU parameters (115200 baud, 8N1) and timing on physical bus
- Verify read/write operations for defined MODBUS registers
- Confirm error handling (CRC errors, timeouts, invalid function codes)
- Exercise end-to-end control path via MODBUS to DUT through Arduino wrapper

## Acceptance Criteria

1. MODBUS RTU slave responds to reads/writes within 100ms
2. Register map validated against `include/register_map.h` and documentation
3. Error conditions (CRC, timeout) handled and logged in HIL tests
4. End-to-end control and telemetry verified via MODBUS using HIL framework
5. Test scripts can be executed via `make test-acceptance` with hardware attached

## Tasks

- [ ] Confirm UART settings and wiring; document in `docs/Testing/`
- [ ] Create/verify HIL test cases for register read/write and boundary conditions
- [ ] Add negative tests for CRC error and timeout behavior
- [ ] Validate modulation paths (GPIO/ADC/PWM) triggered via MODBUS registers
- [ ] Capture logs and artifacts in `test/acceptance/logs/`

## Definition of Done

- [ ] All acceptance criteria met on physical hardware
- [ ] HIL tests for MODBUS pass consistently (â‰¥3 consecutive runs)
- [ ] Documentation of register validation and troubleshooting updated

## Links

- Epic: `docs/agile/epics/epic-0-hil-testing-framework-hardware-verification.md`
- Register Map: `include/register_map.h`
