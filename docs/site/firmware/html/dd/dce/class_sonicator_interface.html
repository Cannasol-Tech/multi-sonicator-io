<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Multi-Sonicator IO Firmware: SonicatorInterface Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Multi-Sonicator IO Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dd/dce/class_sonicator_interface.html','../../','d5/df8/class_sonicator_interface-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">SonicatorInterface Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Manages a single sonicator channel via a defined pin structure.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../dc/d16/sonicator_8h_source.html">sonicator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6002a7b64e7fa43381777bdc41ec007d" id="r_a6002a7b64e7fa43381777bdc41ec007d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6002a7b64e7fa43381777bdc41ec007d">SonicatorInterface</a> (const <a class="el" href="../../de/d5a/struct_sonicator_pins.html">SonicatorPins</a> &amp;pins)</td></tr>
<tr class="memdesc:a6002a7b64e7fa43381777bdc41ec007d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="../../dd/dce/class_sonicator_interface.html" title="Manages a single sonicator channel via a defined pin structure.">SonicatorInterface</a> object.  <br /></td></tr>
<tr class="memitem:aa8ac180541322a6e69ee2802e3be6091" id="r_aa8ac180541322a6e69ee2802e3be6091"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8ac180541322a6e69ee2802e3be6091">~SonicatorInterface</a> ()</td></tr>
<tr class="memdesc:aa8ac180541322a6e69ee2802e3be6091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the <a class="el" href="../../dd/dce/class_sonicator_interface.html" title="Manages a single sonicator channel via a defined pin structure.">SonicatorInterface</a> object.  <br /></td></tr>
<tr class="memitem:adf75054e417d3ab85dacf74271c06839" id="r_adf75054e417d3ab85dacf74271c06839"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf75054e417d3ab85dacf74271c06839">start</a> (void)</td></tr>
<tr class="memdesc:adf75054e417d3ab85dacf74271c06839"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the sonicator.  <br /></td></tr>
<tr class="memitem:aca9b5a2d1a1f5115815dbe4f3b298788" id="r_aca9b5a2d1a1f5115815dbe4f3b298788"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca9b5a2d1a1f5115815dbe4f3b298788">stop</a> (void)</td></tr>
<tr class="memdesc:aca9b5a2d1a1f5115815dbe4f3b298788"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the sonicator.  <br /></td></tr>
<tr class="memitem:ad713a871961b48d00981e575eabbf8cb" id="r_ad713a871961b48d00981e575eabbf8cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad713a871961b48d00981e575eabbf8cb">setAmplitude</a> (uint8_t amplitude_percent)</td></tr>
<tr class="memdesc:ad713a871961b48d00981e575eabbf8cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the amplitude percentage.  <br /></td></tr>
<tr class="memitem:adbe33916b6344b7cb53d49a038e0b981" id="r_adbe33916b6344b7cb53d49a038e0b981"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbe33916b6344b7cb53d49a038e0b981">resetOverload</a> (void)</td></tr>
<tr class="memdesc:adbe33916b6344b7cb53d49a038e0b981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset overload condition.  <br /></td></tr>
<tr class="memitem:a3147a3631f7696163334c948288f84f2" id="r_a3147a3631f7696163334c948288f84f2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3147a3631f7696163334c948288f84f2">emergencyStop</a> (void)</td></tr>
<tr class="memdesc:a3147a3631f7696163334c948288f84f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emergency stop - immediately halt operation.  <br /></td></tr>
<tr class="memitem:a965dc6480b7931e64a6a0f4a704b96a2" id="r_a965dc6480b7931e64a6a0f4a704b96a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d3b/state_8h.html#ad0aeab8703f3a1439806186cba759315">sonicator_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a965dc6480b7931e64a6a0f4a704b96a2">update</a> (void)</td></tr>
<tr class="memdesc:a965dc6480b7931e64a6a0f4a704b96a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main periodic update function.  <br /></td></tr>
<tr class="memitem:a878b1f0ce1b9466530cfad5c966782a6" id="r_a878b1f0ce1b9466530cfad5c966782a6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d8/d4b/hal_8h.html#a5db44754abe690dd04b3f2abe5a075c8">sonicator_status_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a878b1f0ce1b9466530cfad5c966782a6">getStatus</a> (void) const</td></tr>
<tr class="memdesc:a878b1f0ce1b9466530cfad5c966782a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current status.  <br /></td></tr>
<tr class="memitem:afd89b065fa49ffe9192637a70b5d7c62" id="r_afd89b065fa49ffe9192637a70b5d7c62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd89b065fa49ffe9192637a70b5d7c62">isSafe</a> (void) const</td></tr>
<tr class="memdesc:afd89b065fa49ffe9192637a70b5d7c62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if sonicator is in a safe operating condition.  <br /></td></tr>
<tr class="memitem:a7df86f8e26cf646bc2759ab61d987797" id="r_a7df86f8e26cf646bc2759ab61d987797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7df86f8e26cf646bc2759ab61d987797">resetStatistics</a> (void)</td></tr>
<tr class="memdesc:a7df86f8e26cf646bc2759ab61d987797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset runtime statistics counters.  <br /></td></tr>
<tr class="memitem:aa67103634c6336b95401033177050ad7" id="r_aa67103634c6336b95401033177050ad7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa67103634c6336b95401033177050ad7">setSimulationMode</a> (bool enable)</td></tr>
<tr class="memdesc:aa67103634c6336b95401033177050ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable simulation mode for testing.  <br /></td></tr>
<tr class="memitem:a9f7a094a5349c9486b5e6bfa0acefb37" id="r_a9f7a094a5349c9486b5e6bfa0acefb37"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f7a094a5349c9486b5e6bfa0acefb37">forceState</a> (const <a class="el" href="../../d8/d4b/hal_8h.html#a5db44754abe690dd04b3f2abe5a075c8">sonicator_status_t</a> &amp;newState)</td></tr>
<tr class="memdesc:a9f7a094a5349c9486b5e6bfa0acefb37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force sonicator to a specific state (for testing)  <br /></td></tr>
<tr class="memitem:ac194747a2a520ff9e39606ed1879fe16" id="r_ac194747a2a520ff9e39606ed1879fe16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac194747a2a520ff9e39606ed1879fe16">injectFault</a> (const <a class="el" href="../../de/d45/errors_8h.html#a361c37dbeedf89f2fe09845eab7f0a99">sonicator_fault_t</a> &amp;faultMask)</td></tr>
<tr class="memdesc:ac194747a2a520ff9e39606ed1879fe16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inject a fault condition (for testing)  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-static-methods" class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:adb823dc5c7bea02cae667f3d51283b05" id="r_adb823dc5c7bea02cae667f3d51283b05"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb823dc5c7bea02cae667f3d51283b05">stateToString</a> (<a class="el" href="../../db/d3b/state_8h.html#ad0aeab8703f3a1439806186cba759315">sonicator_state_t</a> state)</td></tr>
<tr class="memdesc:adb823dc5c7bea02cae667f3d51283b05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert state enum to human-readable string.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages a single sonicator channel via a defined pin structure. </p>
<p>This class provides a complete interface for controlling and monitoring a single CT2000 sonicator channel. It handles state machine logic, fault detection, hardware I/O, and MODBUS communication.</p>
<dl class="section user"><dt>Usage Example:</dt><dd><div class="fragment"><div class="line"><a class="code hl_struct" href="../../de/d5a/struct_sonicator_pins.html">SonicatorPins</a> p{1, <a class="code hl_define" href="../../d8/daa/group___sonicator1.html#gaae4fd2379cc5fbdc73e55d3c3ba60295">SON1_START_PIN</a>, <a class="code hl_define" href="../../d8/daa/group___sonicator1.html#gabc7bc420dadb6a321ca215951cec19ca">SON1_RESET_PIN</a>, <a class="code hl_define" href="../../d8/daa/group___sonicator1.html#ga7f0be9975baddeff02c6056ffe6d636c">SON1_OVERLOAD_PIN</a>, </div>
<div class="line">                <a class="code hl_define" href="../../d8/daa/group___sonicator1.html#gad06198bc2ba85e227f39e226f18920ab">SON1_FREQ_LOCK_PIN</a>, <a class="code hl_define" href="../../d8/daa/group___sonicator1.html#ga3483eecb5fe0bcadc5368c691ef83672">SON1_FREQ_OUTPUT_PIN</a>, <a class="code hl_define" href="../../d6/d77/group___a_d_c_power_monitoring.html#ga3c0164f11e49bbc1f308471bc872d919">ADC_SONICATOR_1_PIN</a>};</div>
<div class="line"><a class="code hl_class" href="../../dd/dce/class_sonicator_interface.html">SonicatorInterface</a> s1(p);</div>
<div class="line">s1.update(); <span class="comment">// reads control from MODBUS, applies to HAL, writes status to MODBUS</span></div>
<div class="ttc" id="aclass_sonicator_interface_html"><div class="ttname"><a href="../../dd/dce/class_sonicator_interface.html">SonicatorInterface</a></div><div class="ttdoc">Manages a single sonicator channel via a defined pin structure.</div><div class="ttdef"><b>Definition</b> sonicator.h:85</div></div>
<div class="ttc" id="agroup___a_d_c_power_monitoring_html_ga3c0164f11e49bbc1f308471bc872d919"><div class="ttname"><a href="../../d6/d77/group___a_d_c_power_monitoring.html#ga3c0164f11e49bbc1f308471bc872d919">ADC_SONICATOR_1_PIN</a></div><div class="ttdeci">#define ADC_SONICATOR_1_PIN</div><div class="ttdoc">ADC pin assignments for power monitoring.</div><div class="ttdef"><b>Definition</b> system_config.h:154</div></div>
<div class="ttc" id="agroup___sonicator1_html_ga3483eecb5fe0bcadc5368c691ef83672"><div class="ttname"><a href="../../d8/daa/group___sonicator1.html#ga3483eecb5fe0bcadc5368c691ef83672">SON1_FREQ_OUTPUT_PIN</a></div><div class="ttdeci">#define SON1_FREQ_OUTPUT_PIN</div><div class="ttdef"><b>Definition</b> system_config.h:83</div></div>
<div class="ttc" id="agroup___sonicator1_html_ga7f0be9975baddeff02c6056ffe6d636c"><div class="ttname"><a href="../../d8/daa/group___sonicator1.html#ga7f0be9975baddeff02c6056ffe6d636c">SON1_OVERLOAD_PIN</a></div><div class="ttdeci">#define SON1_OVERLOAD_PIN</div><div class="ttdef"><b>Definition</b> system_config.h:82</div></div>
<div class="ttc" id="agroup___sonicator1_html_gaae4fd2379cc5fbdc73e55d3c3ba60295"><div class="ttname"><a href="../../d8/daa/group___sonicator1.html#gaae4fd2379cc5fbdc73e55d3c3ba60295">SON1_START_PIN</a></div><div class="ttdeci">#define SON1_START_PIN</div><div class="ttdef"><b>Definition</b> system_config.h:85</div></div>
<div class="ttc" id="agroup___sonicator1_html_gabc7bc420dadb6a321ca215951cec19ca"><div class="ttname"><a href="../../d8/daa/group___sonicator1.html#gabc7bc420dadb6a321ca215951cec19ca">SON1_RESET_PIN</a></div><div class="ttdeci">#define SON1_RESET_PIN</div><div class="ttdef"><b>Definition</b> system_config.h:86</div></div>
<div class="ttc" id="agroup___sonicator1_html_gad06198bc2ba85e227f39e226f18920ab"><div class="ttname"><a href="../../d8/daa/group___sonicator1.html#gad06198bc2ba85e227f39e226f18920ab">SON1_FREQ_LOCK_PIN</a></div><div class="ttdeci">#define SON1_FREQ_LOCK_PIN</div><div class="ttdef"><b>Definition</b> system_config.h:84</div></div>
<div class="ttc" id="astruct_sonicator_pins_html"><div class="ttname"><a href="../../de/d5a/struct_sonicator_pins.html">SonicatorPins</a></div><div class="ttdoc">Pin bundle describing a single sonicator channel.</div><div class="ttdef"><b>Definition</b> sonicator.h:59</div></div>
</div><!-- fragment --> </dd></dl>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6002a7b64e7fa43381777bdc41ec007d" name="a6002a7b64e7fa43381777bdc41ec007d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6002a7b64e7fa43381777bdc41ec007d">&#9670;&#160;</a></span>SonicatorInterface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SonicatorInterface::SonicatorInterface </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d5a/struct_sonicator_pins.html">SonicatorPins</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pins</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="../../dd/dce/class_sonicator_interface.html" title="Manages a single sonicator channel via a defined pin structure.">SonicatorInterface</a> object. </p>
<p>Construct a new <a class="el" href="../../dd/dce/class_sonicator_interface.html" title="Manages a single sonicator channel via a defined pin structure.">SonicatorInterface</a> object.   </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pins</td><td>Pin configuration for this sonicator channel</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pins</td><td>Pin configuration for this sonicator channel</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8ac180541322a6e69ee2802e3be6091" name="aa8ac180541322a6e69ee2802e3be6091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8ac180541322a6e69ee2802e3be6091">&#9670;&#160;</a></span>~SonicatorInterface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SonicatorInterface::~SonicatorInterface </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the <a class="el" href="../../dd/dce/class_sonicator_interface.html" title="Manages a single sonicator channel via a defined pin structure.">SonicatorInterface</a> object. </p>
<p>Destroy the <a class="el" href="../../dd/dce/class_sonicator_interface.html" title="Manages a single sonicator channel via a defined pin structure.">SonicatorInterface</a> object.   </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a3147a3631f7696163334c948288f84f2" name="a3147a3631f7696163334c948288f84f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3147a3631f7696163334c948288f84f2">&#9670;&#160;</a></span>emergencyStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::emergencyStop </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emergency stop - immediately halt operation. </p>
<p>Emergency stop - immediately halt operation.   </p>
<dl class="section return"><dt>Returns</dt><dd>true if emergency stop was executed, false otherwise</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if emergency stop was executed, false otherwise</dd></dl>

</div>
</div>
<a id="a9f7a094a5349c9486b5e6bfa0acefb37" name="a9f7a094a5349c9486b5e6bfa0acefb37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7a094a5349c9486b5e6bfa0acefb37">&#9670;&#160;</a></span>forceState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::forceState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d4b/hal_8h.html#a5db44754abe690dd04b3f2abe5a075c8">sonicator_status_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>newState</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force sonicator to a specific state (for testing) </p>
<p>Force sonicator to a specific state (for testing)   </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newState</td><td>Desired state to force </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if state was forced successfully, false otherwise</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newState</td><td>Desired state to force </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if state was forced successfully, false otherwise</dd></dl>

</div>
</div>
<a id="a878b1f0ce1b9466530cfad5c966782a6" name="a878b1f0ce1b9466530cfad5c966782a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a878b1f0ce1b9466530cfad5c966782a6">&#9670;&#160;</a></span>getStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d8/d4b/hal_8h.html#a5db44754abe690dd04b3f2abe5a075c8">sonicator_status_t</a> * SonicatorInterface::getStatus </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current status. </p>
<p>Retrieves the current status of the sonicator interface.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to current status structure</dd></dl>
<p>This method provides access to the complete status information of the sonicator, including operational state, hardware readings, fault conditions, and state machine information. The status is built from the current internal state and returned as a read-only structure.</p>
<dl class="section return"><dt>Returns</dt><dd>const sonicator_status_t* Pointer to the current status structure containing:<ul>
<li>is_running: Current operational state</li>
<li>frequency_hz: Measured operating frequency</li>
<li>overload_active: Hardware overload detection status</li>
<li>frequency_locked: Frequency lock status</li>
<li>fault_count: Total number of faults encountered</li>
<li>power_raw_adc: Raw ADC power measurement</li>
<li>last_fault_time: Timestamp of most recent fault</li>
<li>amplitude_actual: Current amplitude percentage</li>
<li>state_machine: Complete state machine information</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The returned pointer is valid until the next call to <a class="el" href="#a878b1f0ce1b9466530cfad5c966782a6" title="Get current status.">getStatus()</a> or object destruction </dd>
<dd>
This method is thread-safe and can be called from interrupt contexts </dd></dl>
<dl class="section see"><dt>See also</dt><dd>buildStatusView_() Internal method that constructs the status view </dd></dl>

</div>
</div>
<a id="ac194747a2a520ff9e39606ed1879fe16" name="ac194747a2a520ff9e39606ed1879fe16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac194747a2a520ff9e39606ed1879fe16">&#9670;&#160;</a></span>injectFault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::injectFault </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d45/errors_8h.html#a361c37dbeedf89f2fe09845eab7f0a99">sonicator_fault_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>faultMask</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inject a fault condition (for testing) </p>
<p>Inject a fault condition (for testing)   </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">faultMask</td><td>Fault condition(s) to inject </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if fault was injected successfully, false otherwise</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">faultMask</td><td>Fault condition(s) to inject </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if fault was injected successfully, false otherwise</dd></dl>

</div>
</div>
<a id="afd89b065fa49ffe9192637a70b5d7c62" name="afd89b065fa49ffe9192637a70b5d7c62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd89b065fa49ffe9192637a70b5d7c62">&#9670;&#160;</a></span>isSafe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::isSafe </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if sonicator is in a safe operating condition. </p>
<p>Check if sonicator is in a safe operating condition.   </p>
<dl class="section return"><dt>Returns</dt><dd>true if safe, false if faults are present</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if safe, false if faults are present</dd></dl>

</div>
</div>
<a id="adbe33916b6344b7cb53d49a038e0b981" name="adbe33916b6344b7cb53d49a038e0b981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbe33916b6344b7cb53d49a038e0b981">&#9670;&#160;</a></span>resetOverload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::resetOverload </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset overload condition. </p>
<p>Reset overload condition.   </p>
<dl class="section return"><dt>Returns</dt><dd>true if reset command was accepted, false otherwise</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if reset command was accepted, false otherwise</dd></dl>

</div>
</div>
<a id="a7df86f8e26cf646bc2759ab61d987797" name="a7df86f8e26cf646bc2759ab61d987797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df86f8e26cf646bc2759ab61d987797">&#9670;&#160;</a></span>resetStatistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SonicatorInterface::resetStatistics </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset runtime statistics counters. </p>
<p>Reset runtime statistics counters.   </p>

</div>
</div>
<a id="ad713a871961b48d00981e575eabbf8cb" name="ad713a871961b48d00981e575eabbf8cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad713a871961b48d00981e575eabbf8cb">&#9670;&#160;</a></span>setAmplitude()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::setAmplitude </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>amplitude_percent</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the amplitude percentage. </p>
<p>Set the amplitude percentage.   </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amplitude_percent</td><td>Desired amplitude (20-100%) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if amplitude was set successfully, false otherwise</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amplitude_percent</td><td>Desired amplitude (20-100%) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if amplitude was set successfully, false otherwise</dd></dl>

</div>
</div>
<a id="aa67103634c6336b95401033177050ad7" name="aa67103634c6336b95401033177050ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67103634c6336b95401033177050ad7">&#9670;&#160;</a></span>setSimulationMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SonicatorInterface::setSimulationMode </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enable</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable simulation mode for testing. </p>
<p>Enable or disable simulation mode for testing.   </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>true to enable simulation mode, false for normal operation</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>true to enable simulation mode, false for normal operation</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf75054e417d3ab85dacf74271c06839" name="adf75054e417d3ab85dacf74271c06839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf75054e417d3ab85dacf74271c06839">&#9670;&#160;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::start </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the sonicator. </p>
<p>Start the sonicator.   </p>
<dl class="section return"><dt>Returns</dt><dd>true if start command was accepted, false otherwise</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if start command was accepted, false otherwise</dd></dl>

</div>
</div>
<a id="adb823dc5c7bea02cae667f3d51283b05" name="adb823dc5c7bea02cae667f3d51283b05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb823dc5c7bea02cae667f3d51283b05">&#9670;&#160;</a></span>stateToString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * SonicatorInterface::stateToString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d3b/state_8h.html#ad0aeab8703f3a1439806186cba759315">sonicator_state_t</a></td>          <td class="paramname"><span class="paramname"><em>state</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert state enum to human-readable string. </p>
<p>Converts a sonicator state enumeration to its string representation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>State to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String representation of the state</dd></dl>
<p>This utility function provides human-readable string representations of the sonicator state machine states for debugging, logging, and status reporting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The sonicator state enumeration value to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>const char* Pointer to a static string containing the state name. Returns "UNKNOWN" for invalid or unrecognized state values.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The returned string is statically allocated and does not need to be freed </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/d3b/state_8h.html#ad0aeab8703f3a1439806186cba759315" title="Sonicator control states.">sonicator_state_t</a> for available state values </dd></dl>

</div>
</div>
<a id="aca9b5a2d1a1f5115815dbe4f3b298788" name="aca9b5a2d1a1f5115815dbe4f3b298788"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca9b5a2d1a1f5115815dbe4f3b298788">&#9670;&#160;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SonicatorInterface::stop </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the sonicator. </p>
<p>Stop the sonicator.   </p>
<dl class="section return"><dt>Returns</dt><dd>true if stop command was accepted, false otherwise</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if stop command was accepted, false otherwise</dd></dl>

</div>
</div>
<a id="a965dc6480b7931e64a6a0f4a704b96a2" name="a965dc6480b7931e64a6a0f4a704b96a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a965dc6480b7931e64a6a0f4a704b96a2">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d3b/state_8h.html#ad0aeab8703f3a1439806186cba759315">sonicator_state_t</a> SonicatorInterface::update </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main periodic update function. </p>
<p>Main periodic update function.   </p>
<p>This function should be called regularly to:</p><ul>
<li>Read MODBUS control commands</li>
<li>Update state machine</li>
<li>Process hardware I/O</li>
<li>Detect and handle faults</li>
<li>Publish status to MODBUS</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Current sonicator state</dd></dl>
<p>This function should be called regularly to:</p><ul>
<li>Read MODBUS control commands</li>
<li>Update state machine</li>
<li>Process hardware I/O</li>
<li>Detect and handle faults</li>
<li>Publish status to MODBUS</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Current sonicator state</dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/sonicator/<a class="el" href="../../dc/d16/sonicator_8h_source.html">sonicator.h</a></li>
<li>src/modules/control/<a class="el" href="../../d2/db9/sonicator_8cpp.html">sonicator.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../dd/dce/class_sonicator_interface.html">SonicatorInterface</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
